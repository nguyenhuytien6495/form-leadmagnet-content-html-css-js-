<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng Form Lead Magnet</title>
</head>
<body>
    <div style="max-width: 800px; margin: 0 auto; padding: 20px;">
        <h1>üìã H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng Form Lead Magnet</h1>
        
        <h2>üéØ M·ª•c ƒë√≠ch</h2>
        <p>Form n√†y ƒë∆∞·ª£c t·∫°o ƒë·ªÉ thu th·∫≠p email c·ªßa kh√°ch h√†ng ti·ªÅm nƒÉng v√† cung c·∫•p t√†i li·ªáu "Black Friday Marketing Checklist 2025" mi·ªÖn ph√≠.</p>
        
        <h2>‚öôÔ∏è C√†i ƒë·∫∑t</h2>
        
        <h3>1. Thi·∫øt l·∫≠p Google Sheets</h3>
        <ul>
            <li>T·∫°o m·ªôt Google Sheets m·ªõi</li>
            <li>V√†o <strong>Extensions > Apps Script</strong></li>
            <li>Sao ch√©p ƒëo·∫°n code JavaScript trong comment v√†o Apps Script</li>
            <li>L∆∞u v√† deploy v·ªõi quy·ªÅn "Anyone"</li>
            <li>Copy URL webhook v√† thay th·∫ø v√†o bi·∫øn <code>scriptURL</code></li>
        </ul>
        
        <h3>2. C·∫≠p nh·∫≠t URL t√†i li·ªáu</h3>
        <p>Thay ƒë·ªïi <code>checklistUrl</code> th√†nh link Google Docs c·ªßa b·∫°n:</p>
        <pre><code>const checklistUrl = 'YOUR_GOOGLE_DOCS_LINK_HERE';</code></pre>
        
        <h2>üîß T√≠nh nƒÉng</h2>
        
        <h3>‚úÖ B·∫£o m·∫≠t</h3>
        <ul>
            <li><strong>Honeypot:</strong> Ch·ªëng bot spam v·ªõi tr∆∞·ªùng ·∫©n "company"</li>
            <li><strong>Validation:</strong> Ki·ªÉm tra ƒë·ªãnh d·∫°ng email h·ª£p l·ªá</li>
            <li><strong>Rate limiting:</strong> NgƒÉn submit li√™n t·ª•c</li>
        </ul>
        
        <h3>üì± Responsive</h3>
        <ul>
            <li>T·ª± ƒë·ªông stack tr√™n mobile (< 480px)</li>
            <li>Responsive design cho m·ªçi thi·∫øt b·ªã</li>
        </ul>
        
        <h3>‚ôø Accessibility</h3>
        <ul>
            <li>ARIA labels v√† roles</li>
            <li>Screen reader support</li>
            <li>Keyboard navigation</li>
        </ul>
        
        <h3>üíæ User Experience</h3>
        <ul>
            <li><strong>LocalStorage:</strong> L∆∞u email ƒë·ªÉ l·∫ßn sau kh√¥ng ph·∫£i nh·∫≠p l·∫°i</li>
            <li><strong>Instant open:</strong> M·ªü t√†i li·ªáu ngay l·∫≠p t·ª©c</li>
            <li><strong>Status feedback:</strong> Th√¥ng b√°o r√µ r√†ng cho user</li>
        </ul>
        
        <h2>üìä D·ªØ li·ªáu thu ƒë∆∞·ª£c</h2>
        <p>Form s·∫Ω ghi v√†o Google Sheets v·ªõi format:</p>
        <table border="1" style="border-collapse: collapse; width: 100%;">
            <tr>
                <th>C·ªôt A</th>
                <th>C·ªôt B</th>
                <th>C·ªôt C</th>
            </tr>
            <tr>
                <td>Th·ªùi gian submit</td>
                <td>Email address</td>
                <td>URL trang web</td>
            </tr>
        </table>
        
        <h2>üé® T√πy ch·ªânh</h2>
        
        <h3>Thay ƒë·ªïi m√†u s·∫Øc</h3>
        <p>S·ª≠a CSS variables trong ph·∫ßn <code>.email-box__btn</code>:</p>
        <pre><code>background: linear-gradient(90deg, #YOUR_COLOR_1, #YOUR_COLOR_2);</code></pre>
        
        <h3>Thay ƒë·ªïi n·ªôi dung</h3>
        <ul>
            <li><strong>Ti√™u ƒë·ªÅ:</strong> S·ª≠a text trong <code>.email-box__title</code></li>
            <li><strong>M√¥ t·∫£:</strong> S·ª≠a text trong <code>.email-box__desc</code></li>
            <li><strong>Button text:</strong> S·ª≠a <code>button.textContent</code> trong JS</li>
        </ul>
        
        <h2>üöÄ Tri·ªÉn khai</h2>
        <ol>
            <li>Upload file HTML l√™n server</li>
            <li>ƒê·∫£m b·∫£o ·∫£nh icon accessible</li>
            <li>Test form tr√™n nhi·ªÅu thi·∫øt b·ªã</li>
            <li>Ki·ªÉm tra Google Sheets nh·∫≠n ƒë∆∞·ª£c data</li>
        </ol>
        
        <h2>üîç Troubleshooting</h2>
        
        <h3>Form kh√¥ng submit ƒë∆∞·ª£c</h3>
        <ul>
            <li>Ki·ªÉm tra <code>scriptURL</code> c√≥ ƒë√∫ng kh√¥ng</li>
            <li>ƒê·∫£m b·∫£o Google Apps Script ƒë√£ deploy</li>
            <li>Check console browser ƒë·ªÉ xem l·ªói</li>
        </ul>
        
        <h3>Kh√¥ng m·ªü ƒë∆∞·ª£c t√†i li·ªáu</h3>
        <ul>
            <li>Ki·ªÉm tra <code>checklistUrl</code></li>
            <li>ƒê·∫£m b·∫£o Google Docs c√≥ quy·ªÅn "Anyone with link"</li>
            <li>Test link tr·ª±c ti·∫øp</li>
        </ul>
        
        <div style="background: #f0f9ff; padding: 16px; border-radius: 8px; margin: 20px 0;">
            <h3>üí° Pro Tips</h3>
            <ul>
                <li>Th√™m Google Analytics ƒë·ªÉ track conversion</li>
                <li>A/B test c√°c button text kh√°c nhau</li>
                <li>T√≠ch h·ª£p v·ªõi email marketing tools</li>
                <li>Th√™m social proof (s·ªë l∆∞·ª£ng downloads)</li>
            </ul>
        </div>
    </div>
</body>
</html>


<!--
// app script for Google Sheets to handle form submissions
function doPost(e) { 
  var sheet = SpreadsheetApp.getActiveSpreadsheet().getActiveSheet(); 
  var data = JSON.parse(e.postData.contents || '{}'); 
  var email = data.email || ''; 
  var url = data.url || ''; 
  sheet.appendRow([new Date(), email, url]); // A: time, B: email, C: URL 
  return ContentService.createTextOutput('OK') .setMimeType(ContentService.MimeType.TEXT); 
} 
-->


<div>
    <div class="email-box" role="region" aria-labelledby="email-box-title">
        <div class="email-box__title" id="email-box-title">
            <img style="margin:0 !important;" src="http://localhost/avada-staging/wp-content/uploads/2025/09/list-magnent-1.webp" alt="icon" width="512" height="512" loading="lazy" decoding="async" fetchpriority="auto">
            Black Friday Marketing Checklist 2025
        </div>
        <p class="email-box__desc" style="text-align: left !important;">
            A condensed playbook to maximize sales and minimize budget.
        </p>
        <form class="email-box__form" novalidate="">
            <label for="lead-email" class="sr-only">Email address</label>
            <input id="lead-email" name="email" type="email" placeholder="Enter your email" class="email-box__input" autocomplete="email" inputmode="email" required="" aria-describedby="email-status">
            <!-- Honeypot for bots: keep visible to DOM but hidden off-screen -->
            <label for="lead-company" class="sr-only">Company</label>
            <input id="lead-company" name="company" type="text" class="email-box__hp" tabindex="-1" aria-hidden="true" autocomplete="off">

            <button type="submit" class="email-box__btn" aria-label="Get the checklist">Get the checklist</button>
        </form>
        <p class="email-box__status" id="email-status" role="status" aria-live="polite"></p>
    </div>
    <style>
        .email-box {
            background: #fff;
            border-radius: 16px;
            padding: 24px 32px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.08);
            border: 1px solid #E5E7EB;
            max-width: 100%;
            margin: 32px auto;
        }

        .email-box__title {
            display: flex;
            align-items: center;
            font-size: 20px;
            font-weight: bold;
            color: #1C1C1C;
            gap: 8px;
        }

        .email-box__title img,
        .email-box__feature img {
            width: 24px !important;
            height: 24px !important;
        }

        .email-box__desc {
            font-size: 16px;
            color: #333;
            margin-bottom: 20px;
        }

        .email-box__feature {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .email-box__form {
            display: flex;
            gap: 12px;
            align-items: stretch;
            position: relative;
        }

        .email-box__input {
            flex: 1;
            padding: 12px 14px;
            font-size: 16px;
            border: 1px solid #ccc;
            border-radius: 8px;
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
        }

        .email-box__input:focus {
            outline: none;
            border-color: #4361EE;
            box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.1);
        }

        .email-box__input:invalid {
            border-color: #ef4444;
        }

        .email-box__input:invalid:focus {
            box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.1);
        }

        .email-box__btn {
            white-space: nowrap;
            text-align: center;
            background: linear-gradient(90deg, #3A0CA3, #4361EE);
            color: #fff;
            font-weight: bold;
            font-size: 16px;
            padding: 12px 20px;
            border-radius: 8px;
            text-decoration: none;
            box-shadow: 0 4px 12px rgba(67, 97, 238, 0.3);
            transition: all 0.2s ease;
            display: inline-block;
            border: none;
            cursor: pointer;
            font-family: inherit;
        }

        .email-box__btn:hover {
            filter: brightness(1.08);
            box-shadow: 0 6px 16px rgba(67, 97, 238, 0.4);
        }

        .email-box__btn:disabled {
            cursor: not-allowed;
            opacity: 0.7;
            box-shadow: none;
        }

        .email-box__status {
            margin-top: 8px;
            margin-bottom: 0px !important;
            font-size: 14px;
            color: #374151;
            min-height: 1em;
        }

        .email-box__status.error {
            color: #ef4444;
        }

        .email-box__hp {
            position: absolute;
            left: -10000px;
            top: auto;
            width: 1px;
            height: 1px;
            overflow: hidden;
        }

        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        /* Mobile stacking */
        @media (max-width: 480px) {
            .email-box__form {
                flex-direction: column;
            }

            .email-box__btn {
                width: 100%;
            }
        }
    </style>
    <script>
        (function () {
            // change your scriptURL here
            const scriptURL = 'https://script.google.com/macros/s/AKfycbz8ZwwwOuM4ij0ZQqp4rq9C-REX3-U7UmQ6e59T4SxDOm4nEQ_NuCgrrRAby8LYcjx9ag/exec';
            const container = document.querySelector('.email-box');
            if (!container) return;

            const form = container.querySelector('form.email-box__form');
            const input = container.querySelector('.email-box__input');
            const button = container.querySelector('.email-box__btn');
            const status = container.querySelector('.email-box__status');
            const honeypot = container.querySelector('input[name="company"]');

            // Prefill from localStorage if available
            try {
                const saved = localStorage.getItem('lead_email');
                if (saved) input.value = saved;
            } catch (e) { /* ignore */ }

            let isSubmitting = false;

            form.addEventListener('submit', async function (e) {
                e.preventDefault();
                if (isSubmitting) return;

                clearStatus();

                const email = (input.value || '').trim();
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

                if (!email) {
                    showError('Please enter your email!');
                    input.focus();
                    return;
                }
                if (!emailRegex.test(email)) {
                    showError('Please enter a valid email address (e.g., example@email.com)');
                    input.focus();
                    return;
                }

                // If honeypot is filled, probably a bot: pretend success
                if (honeypot && honeypot.value) {
                    openChecklist();
                    return;
                }

                isSubmitting = true;
                setLoading(true);

                // Save email for convenience next time
                try { localStorage.setItem('lead_email', email); } catch (e) { /* ignore */ }

                const pageUrl = window.location.href;

                // Open the checklist immediately to avoid any delay (change to your URL)
                const checklistUrl = 'https://docs.google.com/document/d/1Wwb3Sdq-7O--zPakwjZdACfqa6ZbX4ifhYwTP5VuCCo/copy';
                const preOpened = window.open(checklistUrl, '_blank');

                // Abort fetch if it hangs too long
                const controller = ('AbortController' in window) ? new AbortController() : null;
                const signal = controller ? controller.signal : undefined;
                const timeoutId = controller ? setTimeout(() => controller.abort(), 10000) : null; // 10s

                try {
                    await fetch(scriptURL, {
                        method: 'POST',
                        mode: 'no-cors',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify({ email, url: pageUrl, userAgent: navigator.userAgent }),
                        signal
                    }).catch(function () { /* swallow since no-cors gives opaque */ });
                    announce('Your checklist is opening in a new tab...');
                } catch (err) {
                    // Even on error (timeout/abort), continue to open checklist for user experience
                    announce('Network is slow. Opening your checklist...');
                } finally {
                    if (timeoutId) clearTimeout(timeoutId);
                    input.value = '';
                    setLoading(false);
                    isSubmitting = false;
                    // Clear message after a moment to reduce clutter
                    setTimeout(clearStatus, 4000);
                }
            });

            function setLoading(loading) {
                button.disabled = loading;
                button.setAttribute('aria-busy', String(loading));
                button.textContent = loading ? 'Submitting...' : 'Get the checklist';
            }

            function announce(message) {
                if (status) {
                    status.classList.remove('error');
                    status.textContent = message;
                }
            }

            function showError(message) {
                if (status) {
                    status.textContent = message;
                    status.classList.add('error');
                } else {
                    alert(message);
                }
            }

            function clearStatus() {
                if (status) {
                    status.textContent = '';
                    status.classList.remove('error');
                }
            }

            // openChecklist helper no longer needed since we navigate immediately
        })();
    </script>
</div>